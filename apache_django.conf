
# Django додаток KavaCRM
<VirtualHost *:80>
    ServerName localhost
    ServerAlias 127.0.0.1 kava-crm.asuscomm.com www.kava-crm.asuscomm.com
    DocumentRoot "C:/srv/kava/app/kavapro"

    # Проксі до Django сервера на порт 8080
    ProxyPass /crm http://127.0.0.1:8080/crm
    ProxyPassReverse /crm http://127.0.0.1:8080/crm

    # Статичні файли
    Alias /crm/static/ "C:/srv/kava/app/kavapro/staticfiles/"
    <Directory "C:/srv/kava/app/kavapro/staticfiles/">
        Require all granted
    </Directory>

    # Медіа файли
    Alias /crm/media/ "C:/srv/kava/app/kavapro/media/"
    <Directory "C:/srv/kava/app/kavapro/media/">
        Require all granted
    </Directory>

    # Доступ до проекту
    <Directory "C:/srv/kava/app/kavapro">
        <Files wsgi.py>
            Require all granted
        </Files>
        Require all granted
    </Directory>

    # Логи
    ErrorLog "C:/Apache/Apache24/logs/error.log"
    CustomLog "C:/Apache/Apache24/logs/access.log" common

    # Додаткові налаштування
    WSGIDaemonProcess kavacrm python-path="C:/srv/kava/app/kavapro" python-home="C:/srv/kava/app/kavapro/venv"
    WSGIProcessGroup kavacrm
    WSGIApplicationGroup %{GLOBAL}

    # Таймаути
    WSGISocketTimeout 30
    WSGIRetryTimeout 30
</VirtualHost>

# SSL конфігурація (якщо потрібна)
<VirtualHost *:443>
    ServerName localhost
    DocumentRoot "C:/srv/kava/app/kavapro"

    SSLEngine on
    SSLCertificateFile "C:/srv/kava/app/kavapro/ssl/cert.pem"
    SSLCertificateKeyFile "C:/srv/kava/app/kavapro/ssl/key.pem"

    WSGIScriptAlias / "C:/srv/kava/app/kavapro/kavapro/wsgi.py"
    WSGIPythonPath "C:/srv/kava/app/kavapro"

    <Directory "C:/srv/kava/app/kavapro">
        Require all granted
    </Directory>

    Alias /static/ "C:/srv/kava/app/kavapro/staticfiles/"
    <Directory "C:/srv/kava/app/kavapro/staticfiles/">
        Require all granted
    </Directory>
</VirtualHost>
