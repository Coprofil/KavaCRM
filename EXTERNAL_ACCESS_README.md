# üîó –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–ª—è KavaCRM

## üö® –ü–†–û–ë–õ–ï–ú–ê
–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –∑–∞–π—Ç–∏ –Ω–∞ `http://kava-crm.asuscomm.com/crm/` –≤–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ –ø–æ–º–∏–ª–∫—É "Service Unavailable".

## ‚úÖ –†–Ü–®–ï–ù–ù–Ø

### üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–∫–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø:**
   ```bash
   # –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π —Ñ–∞–π–ª
   check_external_access.bat
   ```

2. **–û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏ –ø–æ–º–∏–ª–∫–∏:**
   - Django —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π
   - –ù–µ–º–∞—î –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Apache/Nginx) –¥–ª—è –ø—Ä–æ–∫—Å—ñ
   - –ù–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π Port Forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ
   - –î–æ–º–µ–Ω –Ω–µ –≤–∫–∞–∑—É—î –Ω–∞ –≤–∞—à IP

### üõ†Ô∏è –®–í–ò–î–ö–ï –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø

#### –í–ê–†–Ü–ê–ù–¢ 1: –ü–†–û–°–¢–ò–ô (Windows + Apache)
```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
setup_apache_windows.bat
```

#### –í–ê–†–Ü–ê–ù–¢ 2: –ü–†–û–î–ê–ö–®–ù (Linux + Nginx)
```bash
# –ù–∞ –≤–∞—à–æ–º—É Linux —Å–µ—Ä–≤–µ—Ä—ñ
sudo cp nginx.conf /etc/nginx/sites-available/kavacrm
sudo ln -sf /etc/nginx/sites-available/kavacrm /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx

# –î–ª—è HTTPS
chmod +x setup_https.sh
sudo ./setup_https.sh
```

#### –í–ê–†–Ü–ê–ù–¢ 3: –¢–ï–°–¢–£–í–ê–ù–ù–Ø (ngrok)
```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å ngrok
npm install -g ngrok

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç—É–Ω–µ–ª—å
ngrok http 8000

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ—Ç—Ä–∏–º–∞–Ω–∏–π HTTPS URL
```

### üåê –î–û–°–¢–£–ü–ù–Ü –ê–î–†–ï–°–ò

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ:

| –¢–∏–ø –¥–æ—Å—Ç—É–ø—É | –ê–¥—Ä–µ—Å–∞ | –°—Ç–∞—Ç—É—Å |
|-------------|--------|--------|
| –õ–æ–∫–∞–ª—å–Ω–∏–π | `http://localhost:8000/crm/` | ‚úÖ –ü—Ä–∞—Ü—é—î |
| –ó–æ–≤–Ω—ñ—à–Ω—ñ–π IP | `http://–í–ê–®_IP:8000/crm/` | üîß –ü–æ—Ç—Ä—ñ–±–µ–Ω Port Forwarding |
| –î–æ–º–µ–Ω | `http://kava-crm.asuscomm.com/crm/` | üîß –ü–æ—Ç—Ä—ñ–±–µ–Ω DNS + Port Forwarding |

### ‚öôÔ∏è –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –ü–û–†–¢–Ü–í

#### –ù–∞ ASUS Router (–¥–ª—è –¥–æ–º–µ–Ω—É –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ):
1. –ó–∞–π–¥—ñ—Ç—å –≤ **ASUS Router Admin Panel**
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Advanced Settings ‚Üí WAN ‚Üí Port Forwarding**
3. –î–æ–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:
   ```
   Service Name: KavaCRM
   External Port: 80
   Internal IP: –í–ê–®_–ö–û–ú–ü–Æ–¢–ï–†_IP
   Internal Port: 8000
   Protocol: TCP
   ```

#### –ù–∞ Windows Firewall:
```cmd
# –î–æ–¥–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø–æ—Ä—Ç—É 8000
netsh advfirewall firewall add rule name="Django Server" dir=in action=allow protocol=TCP localport=8000

# –î–æ–¥–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø–æ—Ä—Ç—É 80 (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Apache)
netsh advfirewall firewall add rule name="Web Server" dir=in action=allow protocol=TCP localport=80
```

### üîí HTTPS –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø

–î–ª—è –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É —á–µ—Ä–µ–∑ HTTPS:

1. **–ó Let's Encrypt (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ):**
   ```bash
   # –ù–∞ Linux —Å–µ—Ä–≤–µ—Ä—ñ
   sudo certbot --nginx -d kava-crm.asuscomm.com -d www.kava-crm.asuscomm.com
   ```

2. **–ß–µ—Ä–µ–∑ ngrok:**
   ```bash
   ngrok http 8000  # –î–∞—î HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
   ```

### üêõ –í–ò–†–Ü–®–ï–ù–ù–Ø –ü–†–û–ë–õ–ï–ú

#### –ü–æ–º–∏–ª–∫–∞ "Connection refused":
- Django —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π
- –†—ñ—à–µ–Ω–Ω—è: `python manage.py runserver 0.0.0.0:8000`

#### –ü–æ–º–∏–ª–∫–∞ "Service Unavailable":
- –ù–µ–º–∞—î –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∞–±–æ –≤—ñ–Ω –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
- –†—ñ—à–µ–Ω–Ω—è: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Apache/Nginx –∞–±–æ Port Forwarding

#### –ü–æ–º–∏–ª–∫–∞ "DNS_PROBE_FINISHED_NXDOMAIN":
- –î–æ–º–µ–Ω –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∞–±–æ –Ω–µ –≤–∫–∞–∑—É—î –Ω–∞ –≤–∞—à IP
- –†—ñ—à–µ–Ω–Ω—è: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ DNS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ IP

### üìû –î–û–î–ê–¢–ö–û–í–ê –î–û–ü–û–ú–û–ì–ê

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è:

1. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É:**
   ```bash
   check_external_access.bat
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:**
   - Django: `logs/django.log`
   - Apache: `C:\Apache24\logs\error.log`
   - Nginx: `/var/log/nginx/error.log`

3. **–¢–µ—Å—Ç–æ–≤—ñ –∞–¥—Ä–µ—Å–∏:**
   - –õ–æ–∫–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç: `http://127.0.0.1:8000/crm/`
   - –ó–æ–≤–Ω—ñ—à–Ω—ñ–π —Ç–µ—Å—Ç: –ó–Ω–∞–π–¥—ñ—Ç—å —Å–≤—ñ–π IP —á–µ—Ä–µ–∑ `curl ifconfig.me`

### üéØ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å `setup_external_access_windows.bat`
2. –î–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `http://kava-crm.asuscomm.com/crm/` –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

**üöÄ –ì–æ—Ç–æ–≤–æ! –í–∞—à KavaCRM —Ç–µ–ø–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∑–æ–≤–Ω—ñ!**
