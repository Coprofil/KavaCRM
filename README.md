# KavaCRM - –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ö–ª—ñ—î–Ω—Ç–∞–º–∏

[![Django](https://img.shields.io/badge/Django-5.2.4-green.svg)](https://www.djangoproject.com/)
[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-blue.svg)](https://www.postgresql.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## üìã –û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É

**KavaCRM** - —Ü–µ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º–∏, –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ —Ç–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–º –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è–º. –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞—î —Å—É—á–∞—Å–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É, –±–µ–∑–ø–µ–∫–∏ —Ç–∞ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### üë• –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º–∏
- –ë–∞–∑–∞ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—î—é
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ —Ç–∞ –∞–¥—Ä–µ—Å–∞–º–∏
- –Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–∑–∏—Ç—ñ–≤ —Ç–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤
- –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏

### üöõ –°–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –¥–ª—è –∞–≥–µ–Ω—Ç—ñ–≤
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –ø–æ –¥–Ω—è—Ö —Ç–∏–∂–Ω—è
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤ –ø—Ä–æ –≤—ñ–∑–∏—Ç–∏

### üì¶ –°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∞—Å–∞–º–∏ —Ç–æ–≤–∞—Ä—ñ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –≤—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è—Ö
- –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–ª–∏—à–∫—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å

### üîß –¢–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è
- –ë–∞–∑–∞ –∑–∞–ø—á–∞—Å—Ç–∏–Ω —Ç–∞ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è
- –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ä–µ–º–æ–Ω—Ç
- –ù–∞—Ä—è–¥–∏ –Ω–∞ —Ä–æ–±–æ—Ç–∏
- –°–∫–ª–∞–¥—Å—å–∫–∏–π –æ–±–ª—ñ–∫

### üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –∑–≤—ñ—Ç–∏
- –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤ –ø–æ –∞–≥–µ–Ω—Ç–∞—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª—ñ—î–Ω—Ç–∞—Ö
- –ó–≤—ñ—Ç–∏ –ø–æ –≤—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è—Ö
- –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö

### üîí –ë–µ–∑–ø–µ–∫–∞
- –î–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (2FA)
- –ó–∞—Ö–∏—â–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
- –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö
- –ê—É–¥–∏—Ç –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### ü§ñ –®–Ü —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (RAG)
- –ü–æ—à—É–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ OpenAI —Ç–∞ Anthropic

### üì° –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- Health checks —Å–∏—Å—Ç–µ–º–∏
- Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π

## üõ† –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

- **Backend**: Django 5.2.4, Python 3.8+
- **Database**: PostgreSQL 15+ (–∑ pgvector –¥–ª—è RAG)
- **Frontend**: HTML5, CSS3, JavaScript, Bootstrap
- **AI/ML**: OpenAI GPT, Anthropic Claude, LangChain
- **Security**: django-two-factor-auth, HTTPS
- **Monitoring**: django-health-check, Telegram Bot API
- **Deployment**: Nginx, Gunicorn, systemd

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <repository-url>
cd kavapro
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install -r requirements_production.txt
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
```bash
# –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ (SQLite)
python manage.py migrate

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É (PostgreSQL)
# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ settings_production.py —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó
```

### 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```bash
python manage.py createsuperuser
```

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –†–æ–∑—Ä–æ–±–∫–∞
python manage.py runserver

# –ü—Ä–æ–¥–∞–∫—à–Ω
./start_production.sh
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
–°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤—ñ `config_example.py`:

```bash
# Django
SECRET_KEY=your-secret-key
DEBUG=False

# Database
DB_NAME=kavacrm
DB_USER=kavacrm_user
DB_PASSWORD=your-password

# Email
EMAIL_HOST=smtp.gmail.com
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password

# AI
OPENAI_API_KEY=your-openai-key
ANTHROPIC_API_KEY=your-anthropic-key

# Monitoring
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
kavapro/
‚îú‚îÄ‚îÄ kavacrm/                 # –û—Å–Ω–æ–≤–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # HTML —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ static/            # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ management/        # Django –∫–æ–º–∞–Ω–¥–∏
‚îÇ   ‚îî‚îÄ‚îÄ backup_utils.py    # –£—Ç–∏–ª—ñ—Ç–∏ –±–µ–∫–∞–ø—ñ–≤
‚îú‚îÄ‚îÄ kavapro/               # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py        # –û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ settings_production.py  # –ü—Ä–æ–¥–∞–∫—à–Ω –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ urls.py            # URL –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ setup_*.sh            # –°–∫—Ä–∏–ø—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ requirements_*.txt    # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ init_system.py        # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏
‚îú‚îÄ‚îÄ start_production.sh   # –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
‚îî‚îÄ‚îÄ deploy_check.py      # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É

### 1. HTTPS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```bash
sudo ./setup_cloudflare.sh
sudo ./setup_https.sh
```

### 2. PostgreSQL + pgvector
```bash
sudo ./setup_postgresql_pgvector.sh
```

### 3. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
```bash
sudo ./setup_monitoring.sh
```

### 4. USB –±–µ–∫–∞–ø–∏
```bash
sudo ./setup_usb_backup.sh
```

## üíæ –ë–µ–∫–∞–ø–∏

### –†—É—á–Ω–∏–π –±–µ–∫–∞–ø
```bash
# –ü—Ä–æ—Å—Ç–∏–π –±–µ–∫–∞–ø
python backup_simple.py

# –ü–æ–≤–Ω–∏–π –±–µ–∫–∞–ø —á–µ—Ä–µ–∑ Django
python manage.py backup

# Windows –±–µ–∫–∞–ø
create_backup.bat
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏
- **USB –¥–∏—Å–∫**: —â–æ–¥–Ω—è –æ 04:00
- **PostgreSQL**: —â–æ–¥–Ω—è –æ 03:00
- **–†–æ—Ç–∞—Ü—ñ—è**: –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 30 –¥–Ω—ñ–≤

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### Health checks
- `https://yourdomain.com/health/` - –±–∞–∑–æ–≤–∏–π —Å—Ç–∞—Ç—É—Å
- `https://yourdomain.com/health/detailed/` - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- –©–æ–¥–µ–Ω–Ω—ñ –∑–≤—ñ—Ç–∏
- –ê–ª–µ—Ä—Ç–∏ –ø—Ä–æ –Ω–∏–∑—å–∫—ñ –∑–∞–ª–∏—à–∫–∏

## ü§ñ RAG —Å–∏—Å—Ç–µ–º–∞

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```bash
python manage.py init_rag_system
```

### API endpoints
- `POST /api/rag/question/` - –∑–∞–ø–∏—Ç –¥–æ AI
- `GET /api/rag/search/` - –ø–æ—à—É–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- `GET /api/rag/stats/` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏

## üìä API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### REST API
–ë–∞–∑–æ–≤–∞ URL: `https://yourdomain.com/crm/api/`

#### –ö–ª—ñ—î–Ω—Ç–∏
- `GET /api/clients/` - —Å–ø–∏—Å–æ–∫ –∫–ª—ñ—î–Ω—Ç—ñ–≤
- `POST /api/clients/` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
- `GET /api/clients/{id}/` - –¥–µ—Ç–∞–ª—ñ –∫–ª—ñ—î–Ω—Ç–∞

#### –ú–∞—Ä—à—Ä—É—Ç–∏
- `GET /api/routes/` - —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- `POST /api/routes/` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É

#### –ó–≤—ñ—Ç–∏
- `GET /api/reports/sales/` - –∑–≤—ñ—Ç –ø—Ä–æ–¥–∞–∂—ñ–≤
- `GET /api/reports/clients/` - –∑–≤—ñ—Ç –∫–ª—ñ—î–Ω—Ç—ñ–≤

## üêõ Troubleshooting

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

1. **–ü–æ–º–∏–ª–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**
   ```bash
   python manage.py dbshell
   # –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑'—î–¥–Ω–∞–Ω–Ω—è
   ```

2. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –º—ñ–≥—Ä–∞—Ü—ñ—è–º–∏**
   ```bash
   python manage.py showmigrations
   python manage.py migrate --fake-initial
   ```

3. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ —Å—Ç–∞—Ç–∏—á–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏**
   ```bash
   python manage.py collectstatic --clear
   ```

4. **–ü–æ–º–∏–ª–∫–∏ 2FA**
   ```bash
   python manage.py migrate django_otp
   ```

## üìà –†–æ–∑–≤–∏—Ç–æ–∫

### Roadmap
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram –±–æ—Ç–æ–º –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
- [ ] –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ 1C/ERP —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∑ ML
- [ ] API –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π

### –ö–æ–Ω—Ç—Ä–∏–± º—é—Ü—ñ—è
1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∑–º—ñ–Ω–∏ (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Pull Request

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–æ –ø—ñ–¥ MIT License - –¥–∏–≤—ñ—Ç—å—Å—è [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

- **Email**: support@kavacrm.com
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: [Wiki](wiki/)
- **Issues**: [GitHub Issues](issues/)

## üôè –ü–æ–¥—è–∫–∏

- Django community
- PostgreSQL –∫–æ–º–∞–Ω–¥–∞
- OpenAI —Ç–∞ Anthropic –∑–∞ AI API
- –í—Å—ñ –∫–æ–Ω—Ç—Ä–∏–± º—é—Ç–æ—Ä–∏ –ø—Ä–æ–µ–∫—Ç—É

---

**KavaCRM** - –≤–∞—à –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä –≤ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞–º–∏! üöÄ
